var j$=jQuery,thisWindow=j$(window),masonryContainer,mqWidth=1024;j$.fn.dpDropDownMenu=function(a){a=j$.extend({speed:200},a||{});this.each(function(){var c=this,g=1000;function f(i){if(i.nodeName.toLowerCase()==="li"){var h=j$("> ul",i);return h[0]?h[0]:null}else{return i}}function d(h){if(h.nodeName.toLowerCase()==="ul"){return j$(h).parents("li")[0]}else{return h}}function e(){var h=f(this);if(!h){return}j$.data(h,"cancelHide",false);if(!j$.data(h,"cancelHide")){j$(h).removeClass("show")}}function b(){var i=f(this);if(!i){return}j$.data(i,"cancelHide",true);j$(i).css({zIndex:g++}).addClass("show");if(this.nodeName.toLowerCase()==="ul"){var h=d(this);j$(h).addClass("hover");j$("> a",h).addClass("hover")}}j$("ul, li",this).hover(b,e);j$("li",this).hover(function(){j$(this).addClass("hover");j$("> a",this).addClass("hover")},function(){j$(this).removeClass("hover");j$("> a",this).removeClass("hover")})})};function get_sns_share_count(b,c){encUrl=encodeURIComponent(b);if(j$("#"+c+" .bg-likes")[0]){j$.ajax({url:"https://graph.facebook.com/"+encUrl,dataType:"jsonp",success:function(d){if(typeof d.share!=="undefined"){j$("#"+c+" .bg-likes .share-num").removeClass("dp_spinner").text(d.share.share_count||0)}else{j$("#"+c+" .bg-likes .share-num").removeClass("dp_spinner").text("-")}}})}if(j$("#"+c+" .bg-hatebu")[0]){j$.ajax({url:"https://b.hatena.ne.jp/entry.count?url="+encUrl,dataType:"jsonp",success:function(d){j$("#"+c+" .bg-hatebu .share-num").removeClass("dp_spinner").text(d||0)}})}if(j$("#"+c+" .bg-pinterest")[0]){j$.ajax({url:"https://api.pinterest.com/v1/urls/count.json?url="+encUrl,dataType:"jsonp",success:function(d){j$("#"+c+" .bg-pinterest .share-num").removeClass("dp_spinner").text(d.count||0)}})}if(j$("#"+c+" .bg-pocket")[0]){var a="https://widgets.getpocket.com/v1/button?label=pocket&count=vertical&v=1&url="+encUrl;j$.get(a,function(e){var d=j$(e.responseText).find("#cnt").text();j$("#"+c+" .bg-pocket .share-num").removeClass("dp_spinner").text(d||0)})}}if("ontouchstart" in window){document.documentElement.className=document.documentElement.className+" touch"}if(!j$("html").hasClass("touch")){j$(".pl_img").css("background-attachment","fixed")}function backgroundResize(){var a=thisWindow.height();j$(".pl_img").each(function(d){var l=j$(this);var b=l.width();var k=l.height();var f=l.attr("data-img-w");var c=l.attr("data-img-h");var e=f/c;var j=parseFloat(l.attr("data-diff"));j=j?j:600;var h=0;if(l.hasClass("pl_img")&&!j$("html").hasClass("touch")){var g=k>a?k:a;h=a-k}c=k+h+j;f=c*e;if(b>f){f=b;c=f/e}l.data("resized-imgW",f);l.data("resized-imgH",c);l.css("background-size",f+"px "+c+"px")})}thisWindow.on("resize",backgroundResize);thisWindow.on("focus",backgroundResize);backgroundResize();function parallaxPosition(f){var c=thisWindow.height();var a=thisWindow.scrollTop();var b=a+c;var d=(a+b)/2;j$(".pl_img").each(function(k){var r=j$(this);var q=r.height();var o=r.offset().top;var e=o+q;if(b>o&&a<e){var m=r.data("resized-imgW");var h=r.data("resized-imgH");var j=0;var n=-h+c;var g=q<c?h-q:h-c;o=o-g;e=e+g;var p=j+(n-j)*(d-o)/(e-o);var l=r.attr("data-oriz-pos");l=l?l:"50%";j$(this).css("background-position",l+" "+p+"px")}})}if(!j$("html").hasClass("touch")){thisWindow.on("resize",parallaxPosition);thisWindow.on("scroll",parallaxPosition);parallaxPosition()}j$(function(){var a=j$(".dp-slide");a.prev().css("cursor","pointer");a.prev().on("click",function(){var b=j$(this).next();if(b[0]){b.slideToggle()}})});function floatingWidget(){if(j$("#sidebar")[0]){if(j$("#dp_fix_widget")[0]){var g=j$("#dp_fix_widget");var l=-180;var m=0;var a=0;var i=document.getElementById("sidebar");var h=document.getElementById("footer");var e=document.getElementById("dp_fix_widget");var c=(document.getElementById("widget-container-bottom")!==null)?document.getElementById("widget-container-bottom"):h;var f=document.getElementById("content");var d=i.offsetHeight+i.offsetTop+e.offsetHeight+l;var b=document.documentElement.clientHeight;var k=0;var j=0;if(c){j=c.offsetHeight+h.offsetHeight+l+m}else{j=h.offsetHeight+l+m}thisWindow.scroll(function(){a=thisWindow.scrollTop()+e.offsetHeight;if(thisWindow.scrollTop()>d&&thisWindow.width()>1130){if(a>=c.offsetTop-m){k=b-(c.offsetTop-thisWindow.scrollTop());if((j>window.innerHeight)&&(i.offsetHeight>f.offsetHeight)){g.css({position:"relative",top:"auto",bottom:"auto"})}else{g.css({position:"fixed",top:"auto",bottom:k})}}else{g.css({position:"fixed",top:"60px",bottom:"auto"})}}if(thisWindow.scrollTop()<=d||thisWindow.width()<=1130){g.css({position:"relative",top:"auto",bottom:"auto"})}})}}}function showToolTip(c,e,d,b){var a=j$(c);a.each(function(){var j=null,f="",g="title",i=e||34,h=d||24,k=j$(this).attr(g);if(k==null){g="aria-label";k=j$(this).attr(g)}f='<div class="tooltip-div"><span class="tooltip-msg">'+k+"</span></div>";if(k!=null&&b){f='<div class="tooltip-div"><span class="tooltip-arrow"></span><span class="tooltip-msg">'+k+"</span></div>"}if(k!=null){j$(this).mouseover(function(){if(j$(this)[0].nodeName==="IMG"){j$(this).after(f)}else{j$(this).append(f)}}).mousemove(function(l){j$(this).find(".tooltip-div").css({top:l.offsetY+h+"px",left:l.offsetX+i+"px"})}).mouseout(function(){if(j$(this)[0].nodeName==="IMG"){j$(".tooltip-div").remove()}else{j$(this).find(".tooltip-div").remove()}})}})}function resetGlobalMenu(){var c=j$("#header_container");var a="#global_menu_nav";var b="expand_global_menu_li";var e="mq_sub_li";var d="";if(thisWindow.width()<=mqWidth){j$(a).addClass("mq-mode");if(!j$(a+" li").hasClass(b)){j$(a+" li").addClass(b);j$(a+" li").find("ul").each(function(){j$(this).addClass("bd-none");j$("> li .menu-item",this).addClass("bd-none");j$(this).parent("li:last").prepend('<i class="'+e+' icon-angle-down"></i>')});j$("."+e).on("click",function(){var f=j$(this).siblings("ul.sub-menu");if(f.is(":animated")){f.stop()}if(f.is(":visible")){j$(this).addClass("icon-angle-down");j$(this).removeClass("icon-angle-up")}else{j$(this).addClass("icon-angle-up");j$(this).removeClass("icon-angle-down")}f.slideToggle(200)})}}else{j$(a).removeClass("mq-mode");j$("."+e).remove();j$(a+" .sub-menu").removeClass("bd-none");j$(a+" li .item-menu").removeClass("bd-none");j$(a+" li").removeClass(b);j$("."+e).remove();j$(a).dpDropDownMenu()}}function dpTabWidget(){j$("div.first_tab").show();j$("li.dp_tab_title").on("click",function(){if(j$(this).hasClass("active_tab")){return}var a=j$(this).parent(".dp_tab_widget_ul");var b=j$(this).attr("id");a.children("li").removeClass("active_tab");a.children("li").addClass("inactive_tab");j$(this).removeClass("inactive_tab");j$(this).addClass("active_tab");a.next(".dp_tab_contents").children("div").hide();if(a.next(".dp_tab_contents").children("#"+b+"_content .widget").children().is(":hidden")){a.next(".dp_tab_contents").children("#"+b+"_content .widget").children().show()}a.next(".dp_tab_contents").children("#"+b+"_content").fadeIn()})}function verticalDropDownWidgetList(){if(!j$(".slider_fx")[0]){return}j$(".widget_categories.slider_fx ul.children, .widget_nav_menu.slider_fx ul.sub-menu, .widget_pages.slider_fx ul.children, .widget_mycategoryorder.slider_fx ul.children, .slider_fx .tab_category_content ul.children").prev("a").css("padding-right","34px").after('<span class="v_sub_menu_btn icon-plus2"></span>');j$(".v_sub_menu_btn").on("click",function(){j$(this).next("ul:animated").stop();if(j$(this).next("ul").is(":visible")){j$(this).addClass("icon-plus2");j$(this).removeClass("icon-minus2")}else{j$(this).addClass("icon-minus2");j$(this).removeClass("icon-plus2")}j$(this).next("ul:not(:animated)").slideToggle(200);return false})}function clickArchiveThumb(){j$(".loop-post-thumb.slider").on("click",".bx-viewport",function(){var a=j$(this).parent().parent().parent(".loop-post-thumb").data("url");if(a){window.location=a}else{return false}})}function getAnchor(){j$(".recent_entries li,.dp_related_posts li").on("click",function(){window.location=j$(".item-link",this).attr("href")})}function imagesLoadedRun(c,d,b,a){if(!d){d=500}if(!a){a=600}j$(c).imagesLoaded(function(){j$(c).find("img").css("visibility","visible").animate({opacity:1},d,"easeOutQuart");if(b){setTimeout(function(){j$(b).css("visibility","visible").animate({opacity:1},a)},d,"easeOutQuart")}})}function masonryPosts(f,e,d,c,a,g){if(!g){g="0.8s"}if(a>0){d=container.querySelector(d)/a}var b=f.masonry({itemSelector:e,columnWidth:d,percentPosition:true,gutter:c,isAnimated:true,isFitWidth:true,visibleStyle:{opacity:1},hiddenStyle:{opacity:0},transitionDuration:g});b.imagesLoaded().progress(function(){b.masonry("layout")});return b}function hidden_full_window_display(b,d,a,c){b.click(function(){if(!d.hasClass("show")){b.addClass("show");d.addClass("show");if(a[0]){setTimeout(function(){a.eq(0).focus()},0)}d.fadeIn()}else{b.removeClass("show");d.removeClass("show");d.fadeOut()}});if(a[0]){a.eq(0).focusout(function(){b.removeClass("show");d.removeClass("show");d.fadeOut()})}c.click(function(){b.removeClass("show");d.removeClass("show");d.fadeOut()})}var header_container=j$("#header_container.float"),header_banner_container=j$("#header-banner-container"),header_misc=j$("#hd_misc_div"),header_sns=j$("#hd_sns_links, #hd_tel"),global_menu_nav=j$("#global_menu_nav,#global_menu_ul"),title_group=j$(".header_content .h_group"),title_h1_txt=title_group.find(".hd_title.txt"),title_h1_img=title_group.find(".hd_title.img img"),title_img=title_h1_img.find("img"),title_caption=title_group.find(".caption"),gotop=j$("#gotop"),footer_height=j$("#footer").innerHeight();function dp_scroll_event(){var b=document.documentElement.scrollTop||document.body.scrollTop;var a=j$(document).height()-(thisWindow.height()+b)-200;if(header_container[0]){if(b>150){header_container.addClass("scroll");header_misc.addClass("min");header_sns.addClass("min");global_menu_nav.addClass("min");title_group.css("margin-top","8px");title_h1_img.css("max-height","40px");title_caption.addClass("hide")}else{header_container.removeClass("scroll");header_misc.removeClass("min");header_sns.removeClass("min");global_menu_nav.removeClass("min");title_h1_img.css("max-height","50px");if(title_h1_txt.hasClass("no-cap")){}if(title_h1_img.hasClass("no-cap")){}title_group.css("margin-top","45px");title_caption.removeClass("hide")}}if(b>300){gotop.css("bottom","30px")}else{gotop.css("bottom","-40px")}}thisWindow.on({load:function(a){floatingWidget()},resize:function(a){resetGlobalMenu()},scroll:function(a){dp_scroll_event()}});j$(document).ready(function(){dp_theme_noactivate_copyright();resetGlobalMenu();j$("#expand_float_menu").on("click",function(){var p=j$("#global_menu_nav");if(p.is(":animated")){p.stop()}if(p.is(":visible")){j$(this).removeClass("show");p.removeClass("show")}else{j$(this).addClass("show");p.addClass("show")}});if(typeof Pace!=="undefined"){Pace.on("done",function(){j$(".header-banner-outer").addClass("pacedone")})}var m=j$("#header-banner-inner").find(".static_img, .sl-img");if(m[0]){m.imagesLoaded(function(){m.animate({opacity:1},2800,"easeOutQuart")})}j$("body").fitVids({ignore:"#dpplayer, .unfit"});var b=j$("#trackbacks_div"),k=j$("div.commentlist_div"),n=j$("#commentlist_div"),f=j$("div.trackbacks_div");j$("#commentlist_div").on("click",function(){j$(this).addClass("active_tab");j$(this).removeClass("inactive_tab");b.addClass("inactive_tab");b.removeClass("active_tab");if(!k.is(":visible")){k.fadeIn()}j$("div.trackbacks_div").hide()});j$("#trackbacks_div").on("click",function(){j$(this).addClass("active_tab");j$(this).removeClass("inactive_tab");n.addClass("inactive_tab");n.removeClass("active_tab");if(!f.is(":visible")){f.fadeIn()}j$("div.commentlist_div").hide()});dpTabWidget();verticalDropDownWidgetList();clickArchiveThumb();getAnchor();showToolTip(".tooltip",-75,25,true);showToolTip(".tagcloud a",-45,25,false);var j=".loop-div";var h=".loop-article";var i=".loop-article";var d=j$(".loop-section.blog.one-col");var l=j$(".loop-section.magazine");var g="0.8s";if(d[0]){d.each(function(){var r=j$(this);var p=2;var q=30;masonryPosts(r.find(j),h,i,q,p,g)})}if(l[0]){l.each(function(){var r=j$(this);var p=2;var q=30;if(r.hasClass("one")){if(r.hasClass("three_lines")){q=20;p=3}else{if(r.hasClass("four_lines")){q=20;p=4}}}else{q=20;i+=".small";p=0}masonryPosts(r.find(j),h,i,q,p,g)})}j$("#global_menu_ul").dpDropDownMenu();var c=j$("#hd_search_btn"),a=j$(".hidden-close-btn"),o=j$("#hidden-search-wrapper"),e=j$("#hidden-searchtext");hidden_full_window_display(c,o,e,a);gotop.on("click",function(){j$("body,html").animate({scrollTop:0},600,"easeOutQuart");return false})});