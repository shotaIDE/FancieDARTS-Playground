var j$=jQuery;function onSelectChange(a,b){if(a.id=="target_banner_img"){j$("#header_x1").val(b.x1);j$("#header_y1").val(b.y1);j$("#header_x2").val(b.x2);j$("#header_y2").val(b.y2);j$("#header_crop_width").val(b.width);j$("#header_crop_height").val(b.height)}else{if(a.id=="target_title_img"){j$("#title_x1").val(b.x1);j$("#title_y1").val(b.y1);j$("#title_x2").val(b.x2);j$("#title_y2").val(b.y2);j$("#title_crop_width").val(b.width);j$("#title_crop_height").val(b.height)}}}function onSelectEnd(a,b){if(a.id=="target_banner_img"){j$("#header_crop_width").val(b.width);j$("#header_crop_height").val(b.height)}else{if(a.id=="target_title_img"){j$("#title_crop_width").val(b.width);j$("#title_crop_height").val(b.height)}}}function checkInt(a){return(a.match(/[^0-9]/g)||parseInt(a,10)+""!=a)?false:true}j$(document).ready(function(){j$("img#target_title_img, img#target_banner_img").imgAreaSelect({handles:true,onSelectChange:onSelectChange,onSelectEnd:onSelectEnd});j$("ul#crop_title_img li, ul#crop_header_img li, ul.thumb li").click(function(){j$(this).find("input").attr("checked","checked");if(j$(this).attr("class")=="list_title_img"){j$("img#target_title_img").imgAreaSelect({remove:true});j$("img#target_title_img").imgAreaSelect({handles:true,onSelectChange:onSelectChange,onSelectEnd:onSelectEnd});img=j$(this).find("img.hiddenImg");imgUrl=j$(this).find("img.thumbTitleImg_crop").attr("src");fileName=j$(this).find("label").text();j$("img#target_title_img").attr({src:imgUrl,width:img.width(),height:img.height()});j$("#crop_title_img").attr({value:imgUrl});j$("#crop_title_img_file_name").attr({value:fileName});j$("input#title_resize_val_px").val(img.width())}if(j$(this).attr("class")=="list_header_img"){j$("img#target_banner_img").imgAreaSelect({remove:true});j$("img#target_banner_img").imgAreaSelect({handles:true,onSelectChange:onSelectChange,onSelectEnd:onSelectEnd});img=j$(this).find("img.hiddenImg");imgUrl=j$(this).find("img.thumbBannerImg_crop").attr("src");fileName=j$(this).find("label").text();j$("img#target_banner_img").attr({src:imgUrl,width:img.width(),height:img.height()});j$("#crop_banner_img").attr({value:imgUrl});j$("#crop_banner_img_file_name").attr({value:fileName});j$("input#header_resize_val_px").val(img.width())}});var a={defaultColor:false,hide:true,palettes:true};j$(".dp-color-field").wpColorPicker(a)});j$(function(){j$("#send_trim_banner, #send_trim_title").click(function(){var b;var a;var c;var d;if(j$(this).attr("id")=="send_trim_banner"){if(j$("#header_img_edit_target_trim").is(":checked")){if(!j$("#header_x1").val()||!j$("#header_y1").val()||!j$("#header_crop_width").val()||!j$("#header_crop_height").val()){alert("Some parameter is nothing!\nPlease reset the params with corrent value.");return}else{d={target:"banner",edit_type:"trim",img:j$("#crop_banner_img").val(),file_name:j$("#crop_banner_img_file_name").val(),x1:j$("#header_x1").val(),y1:j$("#header_y1").val(),width:j$("#header_crop_width").val(),height:j$("#header_crop_height").val(),template_dir:j$(".template_dir").val(),image_dir:j$("#form_trim_header_img .image_dir").val(),image_url:j$("#form_trim_header_img .image_url").val()};c="ul#crop_header_img"}}else{if(j$("#header_img_edit_target_resize").is(":checked")){if(j$("#header_img_resize_px").is(":checked")){if(!j$("#header_resize_val_px").val()){alert("Pixel value is blank!");return}else{if(!checkInt(j$("#header_resize_val_px").val())){alert("Pixel value is not integer!");return}}b="pixel";a=j$("#header_resize_val_px").val()}else{if(!j$("#header_resize_val_percent").val()){alert("Percent value is blank!");return}else{if(!checkInt(j$("#header_resize_val_percent").val())){alert("Percent value is not integer!");return}}b="percent";a=j$("#header_resize_val_percent").val()}d={target:"banner",edit_type:"resize",resize_mode:b,resize_value:a,img:j$("#crop_banner_img").val(),file_name:j$("#crop_banner_img_file_name").val(),template_dir:j$(".template_dir").val(),image_dir:j$("#form_trim_header_img .image_dir").val(),image_url:j$("#form_trim_header_img .image_url").val()};c="ul#crop_header_img"}else{alert("Please choose editing type");return}}}if(j$(this).attr("id")=="send_trim_title"){if(j$("#title_img_edit_target_trim").is(":checked")){if(!j$("#title_x1").val()||!j$("#title_y1").val()||!j$("#title_crop_width").val()||!j$("#title_crop_height").val()){alert("Some parameter is nothing!\nPlease reset the params with corrent value.");return}else{d={target:"title",edit_type:"trim",img:j$("#crop_title_img").val(),file_name:j$("#crop_title_img_file_name").val(),x1:j$("#title_x1").val(),y1:j$("#title_y1").val(),width:j$("#title_crop_width").val(),height:j$("#title_crop_height").val(),template_dir:j$(".template_dir").val(),image_dir:j$("#form_trim_title_img .image_dir").val(),image_url:j$("#form_trim_title_img .image_url").val()};c="ul#crop_title_img"}}else{if(j$("#title_img_edit_target_resize").is(":checked")){if(j$("#title_img_resize_px").is(":checked")){if(!j$("#title_resize_val_px").val()){alert("Pixel value is blank!");return}else{if(!checkInt(j$("#title_resize_val_px").val())){alert("Pixel value is not integer!");return}}b="pixel";a=j$("#title_resize_val_px").val()}else{if(!j$("#title_resize_val_percent").val()){alert("Percent value is blank!");return}else{if(!checkInt(j$("#title_resize_val_percent").val())){alert("Percent value is not integer!");return}}b="percent";a=j$("#title_resize_val_percent").val()}d={target:"title",edit_type:"resize",resize_mode:b,resize_value:a,img:j$("#crop_title_img").val(),file_name:j$("#crop_title_img_file_name").val(),template_dir:j$(".template_dir").val(),image_dir:j$("#form_trim_title_img .image_dir").val(),image_url:j$("#form_trim_title_img .image_url").val()};c="ul#crop_title_img"}else{alert("Please choose editing type");return}}}j$.ajax({type:"POST",url:j$(".template_url").val()+"/inc/admin/edit_execute.php",data:d,success:function(f,e){j$(c).append(f);alert("Edited!")},error:function(e,g,f){this;alert("Error : "+f)}})});j$("#form_trim_header_img, #form_trim_title_img").submit(function(){return false});j$("#title_img_edit_target_trim").click(function(){j$("img#target_title_img").imgAreaSelect({remove:true});j$("img#target_title_img").imgAreaSelect({handles:true,onSelectChange:onSelectChange,onSelectEnd:onSelectEnd});j$("#label_for_title_img").slideDown("fast");j$("#title_img_trim_params").fadeIn("fast");j$("#title_img_resize_params").fadeOut("fast")});j$("#title_img_edit_target_resize").click(function(){j$("img#target_title_img").imgAreaSelect({remove:true});j$("#label_for_title_img").slideUp("fast");j$("#title_img_trim_params").fadeOut("fast");j$("#title_img_resize_params").fadeIn("fast")});j$("#header_img_edit_target_trim").click(function(){j$("img#target_banner_img").imgAreaSelect({remove:true});j$("img#target_banner_img").imgAreaSelect({handles:true,onSelectChange:onSelectChange,onSelectEnd:onSelectEnd});j$("#label_for_header_img").slideDown("fast");j$("#header_img_trim_params").fadeIn("fast");j$("#header_img_resize_params").fadeOut("fast")});j$("#header_img_edit_target_resize").click(function(){j$("img#target_banner_img").imgAreaSelect({remove:true});j$("#label_for_header_img").slideUp("fast");j$("#header_img_trim_params").fadeOut("fast");j$("#header_img_resize_params").fadeIn("fast")})});